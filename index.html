<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <title>Debug Console Serendipity</title>
</head>
<body>
    <h1>Controlla la Console (F12)</h1>
    <p>La ricerca Ã¨ partita in automatico all'apertura della pagina.</p>

    <script type="module" src="richiesteAPI.js">

        // Definiamo i filtri come hai chiesto
        const filtriUtente = {
            soggetto: "alchemy",
            anno: 1700
        };

        const limite = 5;

        // Funzione di test immediata
        async function avviaDebug() {
            console.log("--- INIZIO TEST ANTI-ALGORITMO ---");
            console.log("Filtri impostati:", filtriUtente);

            const risultati = await cercaLibro(filtriUtente, limite);

            if (risultati.length > 0) {
                console.log("SUCCESSO! Libri trovati:", risultati.length);
                
                // Mostriamo il primo libro come esempio dettagliato
                console.log("Esempio primo libro (Istanza di classe Libro):", risultati[0]);
                
                // Testiamo il metodo della copertina
                console.log("URL Copertina Grande del primo libro:", risultati[0].getCoverUrl('L'));
                
                // Stampiamo una tabella leggibile
                console.table(risultati.map(l => ({
                    Titolo: l.titolo,
                    Autore: l.autori,
                    ISBN: l.isbn,
                    Anno: l.anno
                })));
            } else {
                console.warn("Nessun risultato trovato. Verifica i parametri o la connessione.");
            }
        }

        avviaDebug();
    </script>
</body>
</html>